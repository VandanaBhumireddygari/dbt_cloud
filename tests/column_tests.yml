version: 2

models:
  - name: stg_google_ads
    columns:
      - name: DATE
        tests:
          - not_null
          - accepted_values:
              values: ["2024-01-01", "2024-06-30"]
              severity: warn

      - name: CAMPAIGN_ID
        tests:
          - not_null
          - unique

      - name: COST
        tests:
          - not_null
          - greater_than:
              value: 0
              severity: warn

  - name: sessions_clean
    columns:
      - name: SESSION_ID
        tests:
          - not_null
          - unique

      - name: USER_ID
        tests:
          - not_null

  - name: orders_clean
    columns:
      - name: ORDER_ID
        tests:
          - unique
          - not_null

      - name: SESSION_ID
        tests:
          - relationships:
              to: ref('sessions_clean')
              field: session_id
